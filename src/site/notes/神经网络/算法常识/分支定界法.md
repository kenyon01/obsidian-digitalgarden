https://www.bilibili.com/video/BV1o3411a7Rk?share_source=copy_web


[00:16](https://www.bilibili.com/video/BV1o3411a7Rk?share_source=copy_web#t=16.276651)

[[整数线性规划]]
目录![](https://raw.githubusercontent.com/kenyon01/image-host/main/img/20220706164624.png)
分支-》定界-》剪枝

[00:55](https://www.bilibili.com/video/BV1o3411a7Rk?share_source=copy_web#t=55.669621)例题

![](https://raw.githubusercontent.com/kenyon01/image-host/main/img/20220706164708.png)

箱数为整数才对


建立数学模型[02:24](https://www.bilibili.com/video/BV1o3411a7Rk?share_source=copy_web#t=144.944173)
![](https://raw.githubusercontent.com/kenyon01/image-host/main/img/20220706165052.png)

有一种想法是先不考虑是不是整数，也即忽略第四个约束，然后使用单纯形法进行求解。最后通过得到的解进行取整，这是否是可行的呢？

![](https://raw.githubusercontent.com/kenyon01/image-host/main/img/20220706165249.png)


484168319-1-80

同学们大家好，欢迎大家一起来学习运筹学。今天我们要学习的内容是整数线性规划一、主要讲一下分支定界法。那么在讲分支定界法之前呢，我们先来学习一下整数线性规划问题，以及如何用图解法来求解我们的整数线性规划问题。我们来先来看一下什么是整数线性规划。

例题一，某场你用集装箱托运甲乙两种货物，他告诉你甲乙两种每箱的体积、重量、可获利润以及托运所受的限制，如表一，他问你这两种货物要托运多少箱才能使我们的一个总利润最大？我们来看一下表一，他告诉你甲乙的体积、重量，哎，每托运一箱的利润，对吧？还有我们本次托运集装箱的体积限制还有重量限制。

好，那么我们来看一下这个问题，它有什么特别之处呢？哎，这就是问题，他问我们要托运多少箱，大家思考一下这个箱数是不是应该为整数才对啊？好，其实在我们一个哎平常工作或者是生产同样也会有很多这种类似的问题。哎，比如说你要安排多少个人去完成某项工作啊。

你要啊安排多少个机器去完成什么呀？

或者是你要安排多少辆车呀？等等啊，那么如何来玩来求解这样的一个整数线性规划问题呢？哎，他问我们要托运多少箱，我们一样的可以给他设未知数，我们来看一下它的模型是怎么样的。我们假设x一代表甲货物的一个托运箱数，x二代表乙货物的托运箱数。

那我们建立我们的模型，哎，我们的目标函数要求一个总利润最大。

好约束条件呢有体积约束、重量约束，还有我们决策变量的非负约束，对不对？其实以上呢是我们就是一般线性规划问题好，但是我们本个其中有一个特别之处是什么？我们的x一、x二是不是还要求为整数才可以呀？哎，这样呢我们有了约束条件，四之后呢，就是哎这个问题我们就可以构成了我们的整数线性规划模型啊。

好，那我们如何来求解这个整数线性规划模型呢？有的同学可能会想到，哎，那我能否先直接不考虑哎这个整数约束？我只考虑前面三个约束，用我们的单纯形法求出这个线性规划问题，然后再把解取个转不就可以了啊。我们来看一下这种想法是否正确呢？

我们先不考虑约束条件四，我们用单纯形法求导前面三个约束以及目标函数，它的一个最优解为51，=4.8x2=0，此时最优目标函数值为96。好，这个时候你可能要取整，对吧？哎，将x一四舍五入让它等于五，然后x2=0。

好，这个时候你一定要注意你取得这组解是否满足我们的约束条件，我们把它带入到我们的约束条件一中去。5，5，25，25大于24了，已经不满足约束条件，说明他已经是不可行解了啊。你有可能想到，那我往小了取，我取四呢，好，取四把它带进去，我们发现可以满足我们的约束条件。
但是这个时候你求得到最大值啊，你求得到目标函数值是否就是最优值？最优目标函数值呢也就这个z等于80，是不是就是我们这个问题的最大目标函数值呢？哎，这是一个值得验证的啊。好，那么后面通过一个我们的图解法讲解呢，你也会发现我们这种想法是不正确的。

啊，具体的我们就通过一个图解法来验证一下。

同时我们也给大家讲一下如何用图解法来求解我们该类整数线性规划问题。因为我们这里的变量只有两个x，一上大家用图解法是比较好求的。我们让x一作为横坐标，x二作用的纵坐标来构建我们的坐标轴。

好，我们在第一章讲线性哦，讲我们的单纯形法中讲了如何用图解法来求解，对不对？

我们先把这个第一个约束化为整等式方程，对吧？我们把它看成等式，方程先把它看成好，我把看成五x1+4x2=24。因为我们的坐标轴是x二是纵坐标，x一是横坐标。所以我把这个等式方程看成是12关于x一的一元，哎，你的一次函数啊，把它看成是关于x一的一次函数。

然后在我们图中把这个一次函数的图给它画出来，图像画出来之后，我们再来看我们约束条件一它所代表的是哪个区域？我们约束条件应要求的是五x1+4x二小于等于24，这条斜线代表的是五x1+4x2=24，对不对？

那小于等于肯定是在这条斜线的左侧或者是右侧，那到底在哪一侧呢？这个时候怎么办？

是不是我们任意的取一个值，取一个坐标点带入到我们的约束条件中。如果满足我们的约束条件，说明这个点就在满足约束条件的那一边，对不对？比如说我们带入0000，代入之后小于等于24满足，哎，说明我们零的这一边。我们斜线的左侧就是哎我们满足约束条件的。

好。

同样的，哎，注意我这里还有一个，我直接画把我们第三个约束给画出来了，x一x二大于等于零，所以我只画了第一象限。好，接着我们再来看第二个约束一样的，我们先把它看成等式、方程，对不对？我们先把它看成rx1+5x2等于13，好，接着我把它看成是一个x二关于x一的一次函数。

好，我把它画出来它应该等于13/5。这样然后我在图中做出这个一次函数的图像。接着啊，因为rx1+5x二小于等于13，那肯定是在这条斜线的下方或者是上方，哎，到底在哪一侧呢？

我们带入一个值00再去满足，说明零这一侧哎就是满足约束条件的，那么它所代表的应该是斜线了下方区域，对吧？

好，接着我们要怎么样找到满足同时满足约束条件123的区域，哎，就是我们的阴影部分。好，我们再来看约束条件，四呢，x一、x二要取整数，是不是？就只能在阴影部分里面的整数格可以取到，对吧？哎，我们把所有的整数格取出来，也就是说哎我们的解只能在这里面的所有的整数格取到啊。
好，这样我们把可能的解表示出来了，我们再来看最优解了，哎，我们的最优解怎么做呢？我们看目标函数值，目标函数值z等于20倍x1+10倍x二，我们同样把它看成一个x一，关于x二，关于x一的哎一次函数。

这里呢我们还写成应该是x二等于负二倍的x一加上十分之z，对吧？哎，我们把这一条函数给它表示出来。

哎，注意这条线呢就代表的是我们这条短直线斜率为负二，哎，我们的一个目标，它的一个常数项呢，常数项是代表什么？与目标属于我们x二的交点，应该是十分之z，对不对？这条线我给它写成还是给它写成x二？

关于x一的函数形式，它应该是等于负二倍x一再加上十分之z啊，哎呀，我们看一下我们与z、x二轴的交点坐标是不是代表是十分之z常数下？哎，那么我们把这条等直线往上平移的话，哎，我们是不是十分之z在不断的增大，十分之内在增大，我们的z是不是也在增大？

平移到什么时候达到最大值呢？

当然要在我们哎可以取到值的上面平移，我们往上平移啊，我们把它平移到这个顶点，是不是就可以使我们的z取到最大值？好，我们的最优解就在四1，这个点取得我们的最优目标函数值等于90。

好，我们再回过头去看一下我们刚才的哎讲到先只考虑前面三个约束，求一般的线性规划模型有问题的最优解。

然后哎再给它取个整，我们刚才是不是取了两个整一个整是50？注意我们50这个点它是不是已经不再按我们的可满足我们约束条件的解的范围之内呢？哎，它已经不可行了，我们再看我们刚才又取了一个四零这个点，对不对？四零这个点在哪儿？在这里啊，我们的目标函数值求出来是多少啊？

是等于80的，哎，我们他是不是就刚好会不是我们的最优解了？我们的最优解应该是等于90啊，所以我们刚才那种想法是不正确的。好，但是呢如果我们的哎我们的变量决策变量只有x一，x上只有两个变量的话，我们可以用图解法来进行求解。啊，并且用图解法也是比较方便、比较好求解的。

但是如果说我们的变量数比较多的话，哎，我们图解法是相对相对来说求解就比较复杂了。那有没有一个通用的解法呢？哎，我们来看一下啊，我们的分支定界法。好，我们假设我们的整数规划问题为a，那它所对应的就说不考虑整数约束所对应的线性规划问题为b。

[11:25](https://www.bilibili.com/video/BV1o3411a7Rk?share_source=copy_web#t=685.491677)

啊，我们并假设我们整数线性规划问题a的目标函数值为内心线性规划问题b，它的目标函数值为z零。好，我们并假设z心它的上下键我们给它取一个上下键。好，那我们的分支定界法呢它的一个思路就来了，它的原理是怎么样的呢？
哎，就说不断的将线性规划问题b它的一个可行域给它分成各个子区域，这样呢来不断的缩小这个z一心它的上界，让它上界不断缩小，并且不断增大它的上下界。这样最终是保证我们求的z心好，如何去哎更新我们的上下界了。哎，这里一定要注意了啊，我们上界怎么更新的？

[12:23](https://www.bilibili.com/video/BV1o3411a7Rk?share_source=copy_web#t=743.535188)
![](https://raw.githubusercontent.com/kenyon01/image-host/main/img/20220706211356.png)

上界更新的是基于我们每次分支了之后，哎，我们问题b的只问题的目标最优目标函数值中的最大值作为新的上界。好，新的下界如何更新呢？是在我们已经求得整数解中的最大值作为新的下界。

好，也就是说做这样一个事例啊，就是我们的z星在这个范围之内，我们最开始给他讲上了一个初始的上届。

好啊，我们给他设了一个初始的上界和一个初始的下界。**它这个初始的上界是我们所每次所对应的线性规划问题b的最优目标函数值。指问题b的最优目标函数值的最大值**，**下届的下届是我们所求得的最大整数解**，对吧？好，那我们分支定界法怎么做的呢？

哎，它不断的让这个上界缩小，并且让这个下界给它增大，这样呢哎，你zz新的区域在缩小，对不对？好，再不断的去缩小这个上界，并且增大这个下界。让z心它那个上下键在不断的缩小。好，直到你后面求出z星为止。

啊，具体的我们来看一个例题，如何做我们的哎如何用分支定界法来求解我们的整数线性规划问题？

我们的求解步骤啊，我们还是讲一下。我们的第一步先要确定我们的初始境界，哎，我们要给他我们最新给他确定一个初始的上界和初始的下界。那它初始的上界等于什么呢？就等于哎我们先求线性规划问题b的最优解，把它的最优解作为我们的初始上界。

当然如果在最开始求我们线性规划问题b，如果问题b它没有可行解，说明我们的问题a也没有可行解。那如果哎求出问题b它的解最优解已经哎对变量已经满足了整数约束，说明这个问题b的最优解也就是我们问题a的最优解了啊。

那我这里讲的肯定是这个问题b它的最优解不满足哎一个整数约束，对吧？好。

我们上届为他我们再来看看它的一个下界呢，我们给它任取一个整数解，满足所有约束它的整数解就可以了。把它作为一个初始的下界。好，第二步我们要分支，哎，我选择问题b中它最优解不满足整数约束的一个变量，如果你有多个变量，你就任意选择一个先进行分支就可以了。

然后对这个变量给他添加约束条件，将问题b分成两个子问题，b一和b二，然后不考虑整数约束的条件下求子问题。b一和b二的最优解。分支之后我们就要定界，哎，你要比较你各个分支的最优解，将最优标函数值的最大值作为什么？
![](https://raw.githubusercontent.com/kenyon01/image-host/main/img/20220706211945.png)

[16:16](https://www.bilibili.com/video/BV1o3411a7Rk?share_source=copy_web#t=976.079816)

作为新的上界，哎，要将各个分支满足整数约束条件的解中的最大值作为新的下界，注意我们的下届哎都是整数解啊，我们的上届呢是我们哎问题b中各个区域的最优目标函数值的最大值。好，分支定界之后我们要进行减值，我们要比较各个分支的解。
如果哎某个分支的最优解小于我们新的下界，直接减脂啊，或者说如果你已经没有可信，这样当然也是减值。那如果你大于新的下降，我们就重复上述步骤，直到求出最优解。好，具体的我们来看例题二，求解下列线性规划问题，哎，目标函数为求最大值。

好，那么我们就假设该线性规划问题为我们的问题AR，它所对应的哎不考虑整数约束条件的问题为哎线性规划问题。b。我们先来看一下，先来求一下他的心性关问题b的一个最优解。好，我们用哎这里用图解法来求解的啊，当然你也可以用我们的单纯型法来求解啊。

注意我们这个时候求是不考虑我们的整数约束的啊，不考虑它好一样的，先把第一个约束条件他表示出来。第二个约束条件表示出来，然后找到哎呀我们的一个可行域，接着把我们的目标函数值求到，在它们的交点处取得最大值。哎，得到这个时候的最优解为x1=4.81，x2=1.82z10=356。

好，这个时候我们还是再把那个整数解啊我们的整数格给它表示出来。啊，也就是说我们如果考虑整数约束的话，我们只能在这些整数格上渠道，对吧？好，我们求解了它所对应的一般线性规划问题的最优解，这个时候我们就可以给他定界了。初始定界，对吧？它的初始上级呢就是我们刚刚求的这个最优解。

356初始的下级呢，哎，你给它随便求一个满足约束条件的整数解，哎，那我们就假设零零它等于02求出来。好，进行到初始的境界之后，我们要干嘛？要开始分支了，对吧？我们来找到我们问题b，我们问题b它的一个非整数变量。哎，比如说我们这里x一、x二都非整数。

我们先看xx一，我们给x一给它添加两个约束，一个约束是x一小于等于四，第二个是x一大于等于五。那么这个时候我们把线性规划问题b给它分成两个子问题。b一和b二，哎，一个是往右边走，一个是往左边走，哎，给它分成两个问题。

第一，好，第二好，我们相当于就是哎b一就是在这个阴影部分之内，对吧？

b二是在这个阴影部分之内，然后我们来求b一的最优级和b二的最优级，啊，求出来b的最优解在哪里取得？我们这条虚线代表的是我们目标函数的等值线啊，那么哎把它平移得到这个顶点得到最优解，对不对？求出来它的最优解应该是x1=42=2.1。好，我们再来看b二的最优解。

第二，只有减求出来应该在这个顶点处取得，那它的一个值等于x1=5x2=1.57，z二等于341。好，这样我们有两个子区域了，对吧？我们要干嘛啊？分了之之后要定界，哎，定界怎么定的？上界要找什么？上界要找我们各个子问题。
目标函数值最优，目标函数值的最大者作为新的上界，349、341、349作为新的上界，对不对？那我们看下界呢，下界怎么定啊？怎么更新？

要找到哎整数解，最大的整数界，我们这个时候还没有出现新的整数界，所以我们下届先不更新，我们把上届进行更新好，上届更新为349，好，接着我们又干嘛？更新了？

我们的下届之后，我们这个时候我们继续来进行分支，这个时候我们还我们b二的最优解是341大于你的下线啊。那b一，我们这个时候还没有进行减脂啊，我们继续继续进行分支。我们先来看b一，先对b一进行分支，我们b一刚才是在哪里取得最优解的？

我们b一是在x1=42=1/2，2.1处取得最优解，x一满足整数约数，但是x二还不满足。所以我们对x二进行分支，哎，我们给他添加两个约束，一个是x二小于等于二，第二个是x二大于等于三。也就说一个是哎往下走下方区域，一个是上方区域，对吧？

哎，中间这一块儿就直接不要了，好，给它分成问题。

b三和b四一样的，这个时候来求解问题。b三和b四的最优解，好b三的最优解，哎，在顶点处取得，取得发现，哎x1=4x2=2，z等于340。然后再看b四的最优解，求出来等于ic1.43x2=3，z等于327。

好，这个时候我们来看一下图中此时有三子区域，对不对？我们又要干嘛？

我们刚刚进行了分支，我们又要进行定界新定界，定界的时候我们呢先看上界，上界怎么样上线。要找这个时候所有子问题，最优目标函数值中的最大者，对不对？最大者哎我们b二刚才求出来这个目标函数值等于多少？

z二是等于341的哈，但这个341是哎它的一个决策变量，哎，是非整数，对吧？

好，那我们z二z三340z四三百27选择哎新的上界为341。好，我们再看一下下界能否更新，下界怎么更新？是不是要找到哎，求得到最大整数解，我们这个时候有没有最大的数据？

是不是有一个刚好有一个x1=4，x2=2，z等于340，那说明我们这个时候新的下界给它更新到340，好，我们给它进行更新，更新好之后我们要干嘛？进行减脂。我们来判断一下我们这里的三个枝有没有哪个枝可能会减掉？

哎，我们看一下我们的b三，哎，340它没有小于我们的最哎下界，我们的b四，327已经小于我们新的下界了，对不对？

说明我们的最优点不可能在你这里取得了，那我们把第四这个值给它减去啊，我们去掉b四这一支啊，接着我们再继续，我们刚才对b一进行了分支，得到b三和b四，接着我们现在来对b二进行分支啊，我们第二刚才在哪里取得最优解的？x一等于五x2=1.57，对吧？
那么x二哎不是整数解，我们对x二给它添加约束，一个是小于等于一个是二，大于等于二，给它分成两个问题，b五和b六。比如说一个是往下走，一个是往上走，我们发现往上走已经没有可行欲了，对不对？说明我们哎问题b六直接是没有可信点，直接减值停止计算。好。

那我们再来计算问题五的哎b五的一个自由减啊。

我们给它平移，发现它在这个顶点处去找最优解，最优解算出来x1=5.44，x二等于一，这个时候z等于多少？308，我们判断一下，308小于我们现在的下界，说明我们b五也要给它减去，对不对？这个值也会给它减去。好。我们再回过头来看，这个时候我们b三啊还没有进行分支了啊。

我们的z星它的下界是340，这是一个整数解，是我们可以取到的，对吧？341是取不到的。因为你341我们刚刚已经通过分支发现没有哪个解能让它满足。哎，300能让他满足，诶，他的一个决策变量取值为整数，说明什么？

说明我们的z值z星只能取到340，对吧？它在哪里取得的？

是不是应该在我们问题第三的诶最优整数集？好，最优解就是我们一个整数解就是我们该问题的最优解啊。我们再回过头来看一下我们整个分支定界的过程啊，我们来看一个流程图，我们在最开始是不是先求了问题b的这有几？对吧？求出来z零等于356。那这个时候呢我们确定了我们z新问题。

a就是我们整数线性规划问题，哎，他的idle最优解是一心的上下界，上界就是我们问题b的最优解。下届是我们任意取了一个整数解，对吧？

好，这个时候我们还不满足整数约束，我们给他分支，我们任意选择，先选择x一，将x一按照一个是x一小于等于四，一个是x一大于等于五进行分支，一个是哎得到问题b一和问题b二来算一下问题。此时问题b一它的最优解得到349问题b二此时的最优解为341。

好，这个时候我们是不是分支了之后我们要进行定界啊。

定界的时候怎么样？我们的上界是选择此时指问题中的哎最优目标函数指导最大的349，对吧？下届呢下届是什么样？是整最大的整数界，我们此时还没有哎找到新的一个整数界，所以我们下届先不进行更新。好，接着我们继续，我们又先对指纹题b一进行一个哎分支。

这个时候我们对x二等于2.1，我们给他一个是x二小于等于二，一个是x二大于等于三，给它进行分支。分支之后我们得到问题b三和b四问题。b三它的一个最优解为x1=4，x2=0=2z的值为340，好问题b四就出来，z等于327。

好，此时有几个指问题，b三b四b二，对不对？
分支了之后又要进行定界，定界这个时候我们又要把哎我们先来看上界，上界选择什么？上界要选择，此时所有子问题的目标函数之中最大值340、327、341，啊，选择341，对比新的上届。

好，我们再来看新的，下届呢新的下界是不是要找最大的整数解，只是刚好有一个整数解，对吧？

哎，z三等于340，所以我们z一的下界给它增大到340。好，接着我们再继续我们再来判断一下啊，这个时候我们新的上下界问题。第四，它的目标函数值327小于我们的下界，所以我直接把b四进行减脂，对不对？好，减完脂之后我们要干嘛？继续进行分支。我们刚才的问题b二还没有进行分支。

哎，我们给他一个是令x二小于等于一，一个是x二大于等于二，给它分支得到问题五。问题六。好，我们来判断一下。问题五我们求得它的最优减为308，308小于我们的下界给它减脂，哎，问题六直接没有可行解，哎，甚至也是减脂。哎。这样的话我们来看一下史诗我们的最优解。

Z星，哎，我们刚才他缩减到340和341，但是呢这个341取不取得到取不到。因为你只是x二是不是整数？所以我们z一星只能取到340，对吧？好，这样呢我们就得到了我们的最优解。好，这样就是我们通过一个分支定界法来求解我们的整数线性规划问题。

好，以上呢就是我们今天的所有内容。



